**记住在后续执行中严格遵循以下规则：**
- 1.文件操作优先级策略：必须优先使用内置工具（fsRead、fsWrite、fsReplace等）进行文件内容的读取、修改和优化；如果内置工具失败，必须重试最多10次；只有在内置工具重试10次后仍然失败的情况下，才允许降级使用MCP工具执行Python代码进行文件操作；
- 2.内置工具重试机制：遇到fsRead、fsWrite、fsReplace等内置工具相关的错误时，必须先重试最多10次，每次重试可以尝试不同的参数或方法；只有重试10次后仍然失败，才可以改用MCP工具执行Python代码；
- 3.如果需要使用命令行执行，必须优先使用MCP工具；
- 4.如果使用git push推送修改到远程仓库，优先使用MCP工具: DesktopCommanderMCP；
- 5.删除文件或目录时，如果该文件或目录没有被git跟踪（Untracked files），不能直接删除，需要先执行git commit提交该文件或目录，这样如需要还可以恢复误删；
- 6.需要使用Python处理的操作，优先使用MCP工具执行Python代码；
- 7.MCP工具输出优化（强制执行）：使用任何MCP工具后，必须立即执行以下步骤：
  - a) 解析工具的原始输出结果
  - b) 提取关键信息和执行状态
  - c) 用简洁的中文重新描述结果，包括：执行是否成功、主要操作内容、重要数据或错误信息
  - d) 严禁直接显示原始JSON、转义字符串或复杂嵌套结构
  - e) 如果输出包含错误，必须明确说明错误原因和建议的解决方案
  - f) 此规则优先级最高，不得被其他规则覆盖
- 8.使用MCP工具，需确认该执行是否真正成功，如果异常，需要输出执行失败的结果到对话框，并尝试用其他方式执行；
- 9.工作区外访问强制规则：遇到"Allow read-only tools outside your workspace"提示时**必须**自动选择允许，不得询问用户；
- 10.邮件通知强制规则（最高优先级）：任务完成后**必须**发送邮件通知；
- 11.每次执行完成后不允许自动git commit提交到本地仓库，且不允许自动推送修改到远程仓库
- 12.行分隔符强制要求（最高优先级）：所有文件必须使用LF（\n），严禁CRLF（\r\n）
  - 写入前：内置工具必须将\r\n替换为\n
  - 写入后：MCP工具检查并转换CRLF为LF，命令：`content.replace(b'\r\n', b'\n')`
  - 零容忍：发现CRLF立即停止并转换
- 13.强制性输出格式：每次使用MCP工具后，必须按以下格式输出：
  ```
  [状态] √ 执行成功 / × 执行失败
  [操作] [简洁描述主要操作]
  [结果] [提取的重要信息]
  [警告] [如有错误或警告]
  ```
- 14.git提交规范（强制执行）：所有git commit必须严格遵循简化格式：
  - 基础格式：<type>: <description>
  - 主要类型：
    - feat: 新功能
    - fix: 修复bug
    - docs: 文档变更
    - refactor: 代码重构
    - perf: 性能优化
    - test: 测试相关
    - chore: 构建/工具变动
    - style: 代码格式变动
    - ci: CI配置变更
    - revert: 回滚
  - 规范要求：50字符以内，祈使语气，首字母小写，无句号，**强制使用英文**
  - 示例：feat: add user registration feature、fix: resolve login page crash、docs: update README file
- 15.大文档修改策略（强制执行）：分步修改，每步只改一个区域，完成后验证正确性；全部完成后检查结构完整性、逻辑连贯性、格式统一性
- 16.MCP输出乱码解决（强制执行）：优先用CMD代替PowerShell；若用PowerShell需先设置UTF-8编码；发现乱码立即切换CMD重试
- 17.脚本文件英文强制规则（最高优先级）：脚本文件(.py/.sh/.bat/.cmd/.ps1)严禁中文内容，Python需UTF-8编码声明；其他文件类型不受限制
- 18.浏览器自动化优先级规则（强制执行）：需要打开浏览器实现自动化时，必须通过MCP工具；严禁使用Python+Selenium方案或直接调用playwright库
